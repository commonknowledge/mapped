# Generated by Django 4.1.2 on 2022-12-08 14:35

from django.db import migrations, models


def update_is_filterable(apps, schemaeditor):  # pragma: no cover
    DataSet = apps.get_model("hub", "DataSet")

    DataSet.objects.filter(
        name__in=(
            "parlid",
            "twfyid",
            "twitter",
            "facebook",
            "wikipedia",
            "constituency_popular_petitions",
        )
    ).update(is_filterable=False)


def reverse_noop(apps, schema_editor):  # pragma: no cover
    pass


class Migration(migrations.Migration):

    dependencies = [
        ("hub", "0028_add_shader_colours"),
    ]

    operations = [
        migrations.AddField(
            model_name="dataset",
            name="is_filterable",
            field=models.BooleanField(default=True),
        ),
        migrations.RunPython(update_is_filterable, reverse_noop),
    ]
